//------------------------------------------------------------------------------
// accmtr_hal.h
// Kyle King
// 2023
//------------------------------------------------------------------------------

#ifndef ACCMTR_HAL_H
#define ACCMTR_HAL_H

//------------------------------------------------------------------------------
// C library includes
//------------------------------------------------------------------------------

//------------------------------------------------------------------------------
// Platform includes
//------------------------------------------------------------------------------

//------------------------------------------------------------------------------
// Application includes
//------------------------------------------------------------------------------

//------------------------------------------------------------------------------
// Data types && preprocessors
//------------------------------------------------------------------------------
#define ACCMTR_CHIP_ID 0x44
#define ACCMTR_CHIP_ID_NOT_FOUND 0xFF

#define DATA_RANGE_PLUS_MINUS_GS 2
#define ACCMTR_1G (UINT16_MAX / (DATA_RANGE_PLUS_MINUS_GS * 2))

typedef struct
{
    int16_t x;
    int16_t y;
    int16_t z;
} accmtr_sample_t; 

//------------------------------------------------------------------------------
// Extern variables
//------------------------------------------------------------------------------

//------------------------------------------------------------------------------
// Public functions
//------------------------------------------------------------------------------
void accmtr_init(void);
void accmtr_loop(void);

uint8_t read_chip_id(void);
bool accmtr_is_active(void);

bool get_next_sample(accmtr_sample_t * sample);

#endif //ACCMTR_HAL_H
